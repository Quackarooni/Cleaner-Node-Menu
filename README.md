# Simpler Add Menu

A Blender addon that simpifies the Add Menu in the Geometry Nodes editor. 
*(Currently just for Blender 3.4)*

## Installation

Download the .zip file from the release page and install via `Edit > Preferences > Addons > Install`. Blender should automatically recognize the file as an add-on.

## Usage

Upon installation, the addon should bind the custom menu to Blender's default shortcut for the Add Menu.  

> - To call the addon menu , press `Ctrl + A` when in the Geometry nodes editor. *(Assuming the hotkeys haven't been modified yet.)*

---

## Comparison

<img title="" src="https://user-images.githubusercontent.com/83491032/210294014-361348bc-ed55-4bc3-be13-6f7076b3dbe8.png" alt="" width="788" data-align="center">

To prevent overcrowding, the addon uses two layers of nested menus instead of one currently used by the default menu.  Generally, menus in the default add menu were broken up to multiple smaller submenus to avoid cases where items longer fit in the user's screen.

Several items in the default menu were moved in this addon to different categories that make more intuitive sense, at least in my opinion. *(i.e. The Input category is now divided according to whether the node is a field, constant, or related to the scene.)*

Lastly, separators are added within menus to group similar items together. This is done in places where having an additional submenu was deemed more cumbersome for the end user. 

---

## How to Modify Hotkeys

<img title="" src="https://user-images.githubusercontent.com/83491032/210294621-c63bc25d-9e2d-4451-bd41-71eda8f77ef8.png" alt="" width="679" data-align="center">

The operator used for the calling the custom menu is named *`"custom_add_menu.invoke_menu"`*.

Under `Edit > Preferences > Keymap`, searching for either `"Invoke Custom Add Menu"` or the aforementioned operator id yields a keymap entry which can be modified to customize what keys are needed to call the custom menu.

---

## Where are my addon menus???

Unfortunately, it is not possible for this addon to automatically fetch menus that are generated by other addons. The code for appending entries to the default add menu are handled by each addon individually. Unless those addons also add code to append themselves to this custom menu, they would not automatically in this menu.

To work around this, the addon has a list of addons that it manually checks whether they're installed and adds the corresponding addon menu accordingly. All the entries are listed under `addon_menus.json`.

All the addons that add an entry to Geometry Nodes' add menu that I am currently aware of has been listed already in that file. Though if there are other addons I've missed, I am open to pull requests to add menu to the listed addons here.

---

## Where are my nodegroup assets???

In Blender 3.4, nodegroups that are marked as assets in the user's asset library are also appended in the default add menu. Sadly, this capability isn't currently possible with this addon.

The code snippet that is responsible for adding nodegroup assets to the default add menu, `node_add_menu.draw_assets_for_catalog"`; *taken from:* [here](https://github.com/blender/blender/blob/master/release/scripts/startup/bl_ui/node_add_menu_geometry.py), leads to crashes when used by this addon. As it stands, it seems like that function can't be simultaneously be accessed by this addon and default add menu.

While the possibility of writing code so that this addon has it's own catalog scanner isn't fully out of the question, doing the work for that is currently out of scope with my current priorities. As it currently stands, the addon simply would not be having support for appending nodegroup assets anytime soon.
